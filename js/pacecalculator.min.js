var paceCalculator=(function(){function k(m,n){if(m.classList){m.classList.add(n)}else{m.className+=" "+n}}function b(m,n){if(m.classList){m.classList.remove(n)}else{m.className=m.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}}var l={open:function(q,r){k(document.querySelector("#modal-window"),"open");document.querySelector("#modal-info").style.display="none";document.querySelector("#modal-error").style.display="none";switch(q){case"info":var n=e(g.time());var u=+(Math.round(g.distance()+"e+2")+"e-2");var o=document.querySelector("#distance-unit option:checked");var s=e(g.pace());var m=document.querySelector("#pace-unit option:checked");document.querySelector("#modal-info-time").innerHTML=n.h+"h "+n.m+"′ "+n.s+"″";document.querySelector("#modal-info-distance").innerHTML=u+" "+(o.textContent||o.innerText);document.querySelector("#modal-info-pace").innerHTML=s.m+"′ "+s.s+"″ / "+(m.textContent||m.innerText);document.querySelector("#modal-info").style.display="block";break;case"error":document.querySelector("#modal-error").innerHTML=r;document.querySelector("#modal-error").style.display="block";break;default:this.close()}},close:function(){b(document.querySelector("#modal-window"),"open")}};var f={time:function(){if(!c.time()){l.open("error","To calculate Time, enter the Pace and Distance")}else{var m=e(g.distance()*g.pace()*g.factor());document.querySelector("#time-hours").value=m.h;document.querySelector("#time-minutes").value=m.m;document.querySelector("#time-seconds").value=m.s;l.open("info")}},distance:function(){if(!c.distance()){l.open("error","To calculate Distance, enter the Time and Pace")}else{var m=g.time()/(g.pace()/g.factor(true));document.querySelector("#distance-amount").value=m.toFixed(4);l.open("info")}},pace:function(){if(!c.pace()){l.open("error","To calculate Pace, enter the Time and Distance")}else{var n=(g.time()/g.distance())/g.factor();var m=e(parseInt(n));if(parseInt(m.h)>0){m.m=parseInt(m.m)+(parseInt(m.h)*60);m.h=0}document.querySelector("#pace-minutes").value=m.m;document.querySelector("#pace-seconds").value=m.s;l.open("info")}},splits:function(){}};var c={time:function(){return(!!g.distance()&&!!g.pace())},distance:function(){return(!!g.time()&&!!g.pace())},pace:function(){return(!!g.time()&&!!g.distance())}};var g={factor:function(m){var o=document.querySelector("#distance-unit option:checked").value;var n=document.querySelector("#pace-unit option:checked").value;return(!!m)?j(n,o):j(o,n)},time:function(){var p=document.querySelector("#time-hours").value;p=(p=="")?0:d(p);var n=document.querySelector("#time-minutes").value;n=(n=="")?0:d(n);var o=document.querySelector("#time-seconds").value;o=(o=="")?0:d(o);var q=i(p,n,o);return(h(p)&&h(n)&&h(o)&&(q>0))?parseFloat(q):false},distance:function(){var m=document.querySelector("#distance-amount");var n=m.value;n=d(n.replace(",","."));m.value=n;return(h(n)&&n>0)?parseFloat(n):false},pace:function(){var n=document.querySelector("#pace-minutes").value;n=(n=="")?0:d(n);var o=document.querySelector("#pace-seconds").value;o=(o=="")?0:d(o);var p=i(0,n,o);return(h(n)&&h(o)&&(p>0))?parseFloat(p):false}};function j(m,n){var o={Mile:{Mile:1,Kilometer:1.609344,Meter:1609.344,Yard:1760,"Half Mile":2,"Quarter Mile":4,"Eigth Mile":8,"1500M":1.072896,"800M":2.01168,"400M":4.02336,"200M":8.04672},Kilometer:{Mile:0.6213712,Kilometer:1,Meter:1000,Yard:1093.613,"Half Mile":1.2427424,"Quarter Mile":2.4854848,"Eigth Mile":4.9709696,"1500M":0.66666666,"800M":1.25,"400M":2.5,"200M":5},Meter:{Mile:0.0006213712,Kilometer:0.001,Meter:1,Yard:1.093613,"Half Mile":0.0012427424,"Quarter Mile":0.0024854848,"Eigth Mile":0.0049709696,"1500M":0.00066666666,"800M":0.00125,"400M":0.0025,"200M":0.005},Yard:{Mile:0.0005681,Kilometer:0.0009144,Meter:0.9144,Yard:1,"Half Mile":0.0011362,"Quarter Mile":0.0022724,"Eigth Mile":0.0045448,"1500M":0.0006096,"800M":0.001143,"400M":0.002286,"200M":0.004572}};return o[m][n]}function i(m,n,o){return parseFloat(m*3600)+parseFloat(n*60)+parseFloat(o)}function e(q){var p=Math.floor(q/3600);var n=Math.floor(q/60)-(p*60);var o=q-(n*60)-(p*3600);return{h:("0"+p).slice(-2),m:("0"+n).slice(-2),s:("0"+o).slice(-2)}}function d(m){var o=parseFloat(m);return(!isNaN(o))?o:0}function h(m){var o=parseFloat(m);return(!isNaN(o)&&o>=0)}function a(o){var n=document.querySelector("#"+o+" option:checked").getAttribute("value");n=n.split("-");if(n.length==2){var p=(n[1]=="K")?"Kilometer":"Mile";document.querySelector("#distance-amount").value=n[0];var q=document.querySelectorAll("#distance-unit option");for(var m=0;m<q.length;m++){q[m].removeAttribute("selected")}document.querySelector("#distance-unit option[value="+p+"]").setAttribute("selected","selected")}}return{init:function(){document.querySelector("#event-select").onchange=function(){a(this.getAttribute("id"))};document.querySelector("#calculate-time").onclick=function(m){f.time();m.preventDefault();this.blur()};document.querySelector("#calculate-distance").onclick=function(m){f.distance();m.preventDefault();this.blur()};document.querySelector("#calculate-pace").onclick=function(m){f.pace();m.preventDefault()};document.querySelector("#modal-alright").onclick=function(){l.close()}}}}());